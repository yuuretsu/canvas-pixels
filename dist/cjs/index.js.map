{"version":3,"file":"index.js","sources":["../../src/extended-image-data.ts","../../src/index.ts"],"sourcesContent":["import { Rgba, RgbaPointers } from \"./types\";\r\n\r\nexport class ExtendedImageData extends ImageData {\r\n  constructor(width: number, height: number) {\r\n    super(width, height);\r\n  }\r\n  private _getPointer(x: number, y: number) {\r\n    return (x + y * this.width) * 4;\r\n  }\r\n  private _getPointers(x: number, y: number): RgbaPointers {\r\n    const pointer = this._getPointer(x, y);\r\n    return [\r\n      pointer,\r\n      pointer + 1,\r\n      pointer + 2,\r\n      pointer + 3,\r\n    ];\r\n  }\r\n  setPixel(x: number, y: number, r: number, g: number, b: number, a: number) {\r\n    const pointers = this._getPointers(x, y);\r\n    this.data[pointers[0]] = r;\r\n    this.data[pointers[1]] = g;\r\n    this.data[pointers[2]] = b;\r\n    this.data[pointers[3]] = a;\r\n  }\r\n  getPixel(x: number, y: number): Rgba {\r\n    const pointers = this._getPointers(x, y);\r\n    return [\r\n      this.data[pointers[0]]!,\r\n      this.data[pointers[1]]!,\r\n      this.data[pointers[2]]!,\r\n      this.data[pointers[3]]!\r\n    ];\r\n  }\r\n}\r\n","import { ExtendedImageData } from \"./extended-image-data\";\n\nexport class Pixels {\n  readonly width: number;\n  readonly height: number;\n  private _data: ExtendedImageData;\n  readonly source: HTMLCanvasElement;\n  private readonly _ctx: CanvasRenderingContext2D;\n  constructor(width: number, height: number, pixelSize: number) {\n    this.width = width;\n    this.height = height;\n    this._data = new ExtendedImageData(width, height);\n    this.source = document.createElement('canvas');\n    this.source.width = width;\n    this.source.height = height;\n    this.source.style.width = String(width * pixelSize) + \"px\";\n    this.source.style.height = String(height * pixelSize) + \"px\";\n    this.source.style.imageRendering = \"pixelated\";\n    this._ctx = this.source.getContext('2d')!;\n  }\n  setPixel(x: number, y: number, r: number, g: number, b: number, a: number) {\n    this._data.setPixel(x, y, r, g, b, a);\n  }\n  getPixel(x: number, y: number) {\n    return this._data.getPixel(x, y);\n  }\n  update() {\n    this._ctx.putImageData(this._data, 0, 0);\n  }\n  clear() {\n    this._data = new ExtendedImageData(this.width, this.height);\n    this._ctx.putImageData(this._data, 0, 0);\n  }\n}\n"],"names":[],"mappings":"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"}